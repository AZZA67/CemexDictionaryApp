@model CemexDictionaryApp.Models.CustomerQuestions

            <div class="page-wrapper">
            <div class="container-xl">
                <!-- Page title -->
                <div class="page-header d-print-none">
                    <div class="row g-2 align-items-center">
                        <div class="col">
                            <!-- Page pre-title -->
                            <div class="page-pretitle">
                                Overview | Answer
                            </div>
                            <h2 class="page-title">
                                       Customer Question # @Model.ID
                            </h2>
                        </div>
                        <!-- Page title actions -->
                        <div class="col-12 col-md-auto ms-auto d-print-none">
                            <div class="btn-list">
                       @*         <span class="d-none d-sm-inline">
                                    <a href="#" class="btn btn-white">
                                        New view
                                    </a>
                                </span>
                           @*     <a href="#" class="btn btn-primary d-none d-sm-inline-block" @*data-bs-toggle="modal" data-bs-target="#modal-report"  onclick="modaladd()">
                                    <!-- Download SVG icon from http://tabler-icons.io/i/plus -->
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                                     Add Product
                                </a>*@
             
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>



            <!-- islam -->

                <div class="page">
      <div class="page-wrapper">
        <div class="page-body">
    <form id="form" asp-action="AnswerQuestion" asp-controller="Question" method="post" enctype="multipart/form-data">
                <div>
                    <input value="@Model.ID" asp-for="ID" class="form-control visually-hidden">
                </div>
          <div class="container-xl">

            <div class="row row-cards">
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-device-analytics" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <rect x="3" y="4" width="18" height="12" rx="1"></rect>
   <line x1="7" y1="20" x2="17" y2="20"></line>
   <line x1="9" y1="16" x2="9" y2="20"></line>
   <line x1="15" y1="16" x2="15" y2="20"></line>
   <path d="M8 12l3 -3l2 2l3 -3"></path>
</svg>
                      Question By : <span style="color:mediumblue">@Model.User.UserName  </span>
                      </h3>
                </div>

                <div class="card-body">
                    <div class="form-group mb-3 ">
                      <span>
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                           <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                           <circle cx="9" cy="7" r="4"></circle>
                           <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
                           <path d="M16 11h6m-3 -3v6"></path>
                        </svg> | <b><span style="color:mediumblue">Customer Info </span> </b></span>
                    </div>

                    <div class="form-group mb-3 ">
                       <span><b>Name : </b> @Model.User.UserName</span><br />
                       <span><b>State : </b> @Model.User.State</span><br />
                       <span><b>Zone : </b> @Model.User.Zone</span><br />
                       <span><b>Occupation : </b> @Model.User.Occupation</span><br />
                       @*<span><b>Category : </b> @Model.User.Category</span><br />*@
                       <span><b>Mobile : </b> @Model.User.PhoneNumber</span>

                    </div>
                     <div class="form-group mb-3 ">
                               <span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-list-details" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                               <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                               <path d="M13 5h8"></path>
                               <path d="M13 9h5"></path>
                               <path d="M13 15h8"></path>
                               <path d="M13 19h5"></path>
                               <rect x="3" y="4" width="6" height="6" rx="1"></rect>
                               <rect x="3" y="14" width="6" height="6" rx="1"></rect>
                        </svg> | <b><span style="color:mediumblue">Question Details </span> </b></span>
             
                    </div>

                     <div class="form-group mb-3 ">
                         <span><b>Question : <br /> </b> @Model.Text</span><br />
                         <span><b>Question Category : </b> @Model.Category.Name_En</span><br />
                         <span><b>Description : <br /> </b> @Model.Description</span><br />


                     </div>
                        <div class="form-group mb-3 ">
                       <span><b>Images </b></span><br />
                     
                    
                    <div class="row g-2">
                        @foreach (var media in Model.QuestionMedia)
                        {

                            @if (media.Type == "Image")
                            {
                                <div class="col-6 col-sm-4" >
                                    <label class="mb-2">
                                        <span>
                                                   <img id="myImg"  onclick="modal_pop(this)" src="~/images/CustomerQuestions/@media.Path" style="width:100%;max-width:300px">
                                        </span>
                                    </label>
                                </div>

                            }
                        }
                    </div>
                    </div>
                </div>
              </div>
            </div>

                  <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-float-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <rect width="6" height="6" x="4" y="5" rx="1"></rect>
   <line x1="14" y1="7" x2="20" y2="7"></line>
   <line x1="14" y1="11" x2="20" y2="11"></line>
   <line x1="4" y1="15" x2="20" y2="15"></line>
   <line x1="4" y1="19" x2="20" y2="19"></line>
</svg>
                      Answer 
                      </h3>
                </div>
                <div class="card-body">

                        <div class="form-group mb-3 ">
                            <label asp-for="Answer" class="form-label">Answer</label>
                            <div>
              @*                  <input asp-for="Answer" class="form-control" required>*@
                                 <textarea asp-for="Answer" class="form-control" rows="3" required></textarea>
                            </div>
                            <span asp-validation-for="@Model.Answer" class="text-danger"></span>
                        </div>

                    <div class="form-group mb-3 ">

                        <label class="form-label">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-movie" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <rect x="4" y="4" width="16" height="16" rx="2"></rect>
   <line x1="8" y1="4" x2="8" y2="20"></line>
   <line x1="16" y1="4" x2="16" y2="20"></line>
   <line x1="4" y1="8" x2="8" y2="8"></line>
   <line x1="4" y1="16" x2="8" y2="16"></line>
   <line x1="4" y1="12" x2="20" y2="12"></line>
   <line x1="16" y1="8" x2="20" y2="8"></line>

   <line x1="16" y1="16" x2="20" y2="16"></line>
</svg>
                            Video URL</label>
                        <div>
                            <input name="videoURL" id="videoURL" class="form-control" placeholder="Enter Video URL">
                        </div>
                    </div>

                        <!--images-->

                                            <div class="form-group mb-3 ">
                           <label class="form-label">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
                              <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                              <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
                            </svg>
                        Images (3 Images) @*<h5 style="color:red"> 3 images only are allowed, you can upload new or choose from existing!</h5>*@ </label>

                      <div class="card">
                            <div class="card-body row border-0 field">
                                             <h5>New Images</h5>
                                <div class="col-10">
                                    <input class="form-control files" type="file" name="photos" id="photos" multiple />
                                </div>

                                <div class="col-2">
                                 <button type="button" onclick="Reset()" class="btn btn-info">Reset</button>
                                 </div>
                            </div>
                        </div>
                             <br />
                             <div class="card">
                    
                            <div class="card-body row border-0 field">
                                       <h5>Existing Images</h5>
                                <div class="col-5">
                                    <button type="button" onclick="modaladd()" class="btn btn-info">Choose from existing images</button>
                                </div>

                         
                            </div>
                        </div>
                    </div>
                        
                       

                  <div class="form-group mb-3 ">
                    <div  id="ImageCounter"class="alert alert-success" role="alert">
                   @* Images Selected : 0 New : 0 Existing : 0 *@
                   </div>
                    </div>

                 

                    <br />


                   <div class="form-group mb-3 ">
                       <div  class="row">
           
                           <table style="width:100%;">
                               <tr style="width:100%">
                                   <td style="width:50%"><button id="submit" class="btn btn-primary" type="submit" style="width:90%">Submit</button> </td>
                                   <td style="width:50%"><a onclick="rejectModal()"  class="btn btn-danger" style="width:90%; color:white">Reject Question</a> </td>
                               </tr>
                           </table>
                       </div>
                </div>
                </div>
              </div>
            </div>

     
          </div>
        </div>
            </form>
      </div>


 
    </div>
  </div>
            <!--end-->

<div class="modal modal-blur fade" id="modal-danger" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            <div class="modal-status bg-danger"></div>
            <div class="modal-body text-center py-4">
                Download SVG icon from http://tabler-icons.io/i/alert-triangle
                <svg xmlns="http://www.w3.org/2000/svg" class="icon mb-2 text-danger icon-lg" width="24" height="24"
                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 9v2m0 4v.01" />
                <path d="M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75" /></svg>
                <h3>Sorry only 3 images are allowed </h3>
                <div class="text-muted">Do you really want to remove 84 files? What you've done cannot be undone.</div>
            </div>

        </div>
    </div>
</div>

<div class="modal modal-blur fade" id="modal-scrollable" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable w-100" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Scrollable modal</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Image Check</label>
                    <div class="row g-2">
                        @foreach (string image in ViewBag.Images)
                        {
                            <div class="col-6 col-sm-4">
                                <label class="form-imagecheck mb-2">
                                    <input onclick="add('@image', this)" type="checkbox" class="form-imagecheck-input" value="@image" />
                                    <span class="form-imagecheck-figure">
                                        <img src="~/images/Questions/@image" alt="Breakfast served with tea, bread and eggs" class="form-imagecheck-image">
                                    </span>
                                </label>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn me-auto" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="save()">Save changes</button>
            </div>
        </div>
    </div>
</div>
<div class="modal modal-blur fade" id="modal-small" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">

            <div class="modal-body">
                <div class="modal-title">Comment</div>
                <input  onchange="savecomment()" id="comment" asp-for="Comment" class="form-control" placeholder="Enter Your Comment!">
            </div>

            <div class="modal-footer">
                <button   type="button" class="btn btn-link link-secondary me-auto" data-bs-dismiss="modal">Cancel</button>
          <a href="/Dictionary/Question/RejectQuestion?questionId=@Model.ID"  type="button" class="btn btn-danger">Yes,reject</a>
            </div>

        </div>
    </div>
</div>

<div id="myModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="img01">
    <div id="caption"></div>
</div>


@section scripts
    {
    <link href="~/Tags/Tags.css" rel="stylesheet" />
    <link href="~/Upload_Images/Upload_Images.css" rel="stylesheet" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    @*<script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>*@


    <script src="~/Multiselect/js/jquery.min.js"></script>
    <script src="~/Multiselectjs/popper.js"></script>
    <script src="~/Multiselectjs/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.13/dist/semantic.min.js"></script>
    <script src="~/Multiselect/js/main.js"></script>
    <script>


        $(document).ready(function () {
            $(window).keydown(function (event) {
                if (event.keyCode == 13) {
                    event.preventDefault();
                    return false;
                }
            });
        });

        function modal_pop(img)
        {
             var modal = document.getElementById("myModal");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        //var img = document.getElementById("MyImg");
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        img.onclick = function () {
            modal.style.display = "block";
            modalImg.src = this.src;
            captionText.innerHTML = this.alt;
        }

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
        }
        // Get the modal
       
     
        var tagss = [];

        $(function () { // DOM ready

            // ::: TAGS BOX
            $("#tags input").on({

                focusout: function () {
                    var txt = this.value.replace(/[^a-z0-9\+\-\.\#]/ig, ''); // allowed characters
                    if (txt) {
                        $("<span/>", { text: txt.toLowerCase(), insertBefore: this });
                        add_tag(txt);
                        console.log(tagss);
                        console.log(txt);
                    }

                    this.value = "";
                },
                keyup: function (ev) {

                    // if: comma|enter (delimit more keyCodes with | pipe)
                    if (/(188|13)/.test(ev.which)) {

                        $(this).focusout();
                    }

                }
            });
            $('#tags').on('click', 'span', function () {
                if (confirm("Remove " + $(this).text() + "?")) {


                    $(this).remove();
                    console.log($(this).text());
                    remove_tag($(this).text());

                }
            });
        });
        function add_tag(txt) {

            $.ajax({

                url: "/Question/add_Tag/${txt}",
                traditional: true,
                contentType: "application/json; charset=utf-8",
                data: { "new_tag": txt },
                datatype: "json",
            });
        }

        function savecomment() {
            var comment_txt = document.getElementById("comment").value;
          
            console.log(comment_txt);

            $.ajax({
                url: "/Question/savecomment",
                contentType: "application/json; charset=utf-8",
                data: {
                "comment": comment_txt},
                datatype: "json",
            }
                );
        }

        function rejectModal() {
          
               $('#modal-small').modal('show');
  
        }


        function remove_tag(txt) {

            $.ajax({

                url: "/Question/remove_Tag/${txt}",
                traditional: true,
                contentType: "application/json; charset=utf-8",
                data: { "removed_tag": txt },
                datatype: "json",

            });

        }


        $(document).ready(function () {
            if (window.File && window.FileList && window.FileReader) {
                $(".files").on("change", function (e) {

                    var files = e.target.files,
                        filesLength = files.length;
                    for (var i = 0; i < filesLength; i++) {
                        var f = files[i]
                        var fileReader = new FileReader();
                        fileReader.onload = (function (e) {
                            var file = e.target;
                            $("<span class=\"pip\">" +
                                "<img class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + file.name + "\"/>" +
                            
                                "</span>").insertAfter(".files");
                          
                        });
                        fileReader.readAsDataURL(f);
                    }
                    var neww = document.getElementById("photos").files.length;
                    var totalcount = neww + array.length;
                    document.getElementById("ImageCounter").innerHTML = "Images Selected : " + totalcount + " new : " + neww + " Existing: " + array.length;
                });
            } else {
                alert("Your browser doesn't support to File API")
            }
        });
        var array = [];
        function add(image, check) {

            if (check.checked == true && array.length < 3) {
                array.push(image);
            }
            else if (check.checked == false) {
                array.splice(array.indexOf(image), 1);
            }
            else {
                $('.alert').show();
                alert("only 3 images are allowed!");

                check.checked = false;
                console.log("hi");
            }
            var neww = document.getElementById("photos").files.length;
            var totalcount = neww + array.length;
            document.getElementById("ImageCounter").innerHTML = "Images Selected : " + totalcount + " new : " + neww + " Existing: " + array.length;
            console.log(image, check);
        }
        function save() {
            console.log(array);
            $.ajax({

                url: "/Question/Add/${array}",
                traditional: true,
                contentType: "application/json; charset=utf-8",
                data: { "images": array },
                datatype: "json",
            });
        }


        function Reset() {
            document.getElementById("photos").value = null;
            document.getElementById("ImageCounter").innerHTML = "Images Selected : " + array.length + " new : " + 0 + " Existing: " + array.length;
            $(".pip").remove();
        }


        $(function () {
            $("button[type='submit']").click(function () {
                var $fileUpload = $("input[type='file']");
                if (parseInt($fileUpload.get(0).files.length) > 3) {
                    alert("You can only upload a maximum of 3 files");

                }
            });
        });
        function modaladd() {
            $('#modal-scrollable').modal('show');
        }
    </script>
}



















     